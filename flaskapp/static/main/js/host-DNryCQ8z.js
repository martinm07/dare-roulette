var se=t=>{throw TypeError(t)};var le=(t,e,r)=>e.has(t)||se("Cannot "+r);var U=(t,e,r)=>(le(t,e,"read from private field"),r?r.call(t):e.get(t)),Z=(t,e,r)=>e.has(t)?se("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),K=(t,e,r,n)=>(le(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);import{k as Be,l as Oe,g as o,n as We,r as pe,o as be,q as qe,I as Q,u as ye,v as $,w as ze,x as xe,y as ee,E as Fe,z as He,A as Ue,B as Ve,C as Ye,D as Je,F as Xe,G as Ge,H as Ze,J as oe,K as ue,L as Ke,M as Qe,N as je,O as $e,P as et,Q as me,R as q,S as tt,T as we,U as rt,V as nt,W as at,X as it,Y as st,Z as re,s as M,_ as lt,$ as ot,a0 as ut,a1 as ct,a2 as Se,a3 as Ee,d as Ae,p as ne,a as R,t as D,a4 as Ie,a5 as O,b as N,e as ae,j as W,c as I,f as P,a6 as F,h as ft,i as dt,a7 as vt,a8 as _t,a9 as ce,aa as ht,ab as gt,m as pt}from"./svelte-DC3VyRT9.js";/* empty css                 */import{i as j}from"./if-ILldh6_l.js";/* empty css                      */function Me(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let bt=!1;function ke(t,e){return e}function yt(t,e,r,n){for(var a=[],i=e.length,l=0;l<i;l++)He(e[l].e,a,!0);var f=i>0&&a.length===0&&r!==null;if(f){var v=r.parentNode;Ue(v),v.append(r),n.clear(),B(t,e[0].prev,e[i-1].next)}Ve(a,()=>{for(var d=0;d<i;d++){var u=e[d];f||(n.delete(u.k),B(t,u.prev,u.next)),Ye(u.e,!f)}})}function Te(t,e,r,n,a,i=null){var l=t,f={flags:e,items:new Map,first:null};{var v=t;l=v.appendChild(Be())}var d=null,u=!1,w=We(()=>{var c=r();return Ze(c)?c:c==null?[]:ye(c)});Oe(()=>{var c=o(w),y=c.length;u&&y===0||(u=y===0,xt(c,f,l,a,e,n,r),i!==null&&(y===0?d?pe(d):d=be(()=>i(l)):d!==null&&qe(d,()=>{d=null})),o(w))})}function xt(t,e,r,n,a,i,l){var f=t.length,v=e.items,d=e.first,u=d,w,c=null,y=[],g=[],_,h,s,p;for(p=0;p<f;p+=1){if(_=t[p],h=i(_,p),s=v.get(h),s===void 0){var A=u?u.e.nodes_start:r;c=wt(A,e,c,c===null?e.first:c.next,_,h,p,n,a,l),v.set(h,c),y=[],g=[],u=c.next;continue}if(mt(s,_,p),s.e.f&Q&&pe(s.e),s!==u){if(w!==void 0&&w.has(s)){if(y.length<g.length){var x=g[0],S;c=x.prev;var b=y[0],E=y[y.length-1];for(S=0;S<y.length;S+=1)fe(y[S],x,r);for(S=0;S<g.length;S+=1)w.delete(g[S]);B(e,b.prev,E.next),B(e,c,b),B(e,E,x),u=x,c=E,p-=1,y=[],g=[]}else w.delete(s),fe(s,u,r),B(e,s.prev,s.next),B(e,s,c===null?e.first:c.next),B(e,c,s),c=s;continue}for(y=[],g=[];u!==null&&u.k!==h;)u.e.f&Q||(w??(w=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue;s=u}y.push(s),c=s,u=s.next}if(u!==null||w!==void 0){for(var k=w===void 0?[]:ye(w);u!==null;)u.e.f&Q||k.push(u),u=u.next;var T=k.length;if(T>0){var m=f===0?r:null;yt(e,k,m,v)}}$.first=e.first&&e.first.e,$.last=c&&c.e}function mt(t,e,r,n){ze(t.v,e),t.i=r}function wt(t,e,r,n,a,i,l,f,v,d){var u=(v&Xe)!==0,w=(v&Ge)===0,c=u?w?xe(a):ee(a):a,y=v&Fe?ee(l):l,g={i:y,v:c,k:i,a:null,e:null,prev:r,next:n};try{return g.e=be(()=>f(t,c,y,d),bt),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?e.first=g:(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function fe(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,a=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==n;){var l=Je(i);a.before(i),i=l}}function B(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const de=[...` 	
\r\f \v\uFEFF`];function St(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var i=a.length,l=0;(l=n.indexOf(a,l))>=0;){var f=l+i;(l===0||de.includes(n[l-1]))&&(f===n.length||de.includes(n[f]))?n=(l===0?"":n.substring(0,l))+n.substring(f+1):l=f}}return n===""?null:n}function Et(t,e){return t==null?null:String(t)}function J(t,e,r,n,a,i){var l=t.__className;if(l!==r||l===void 0){var f=St(r,n,i);f==null?t.removeAttribute("class"):t.className=f,t.__className=r}else if(i&&a!==i)for(var v in i){var d=!!i[v];(a==null||d!==!!a[v])&&t.classList.toggle(v,d)}return i}function ve(t,e,r,n){var a=t.__style;if(a!==e){var i=Et(e);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}return n}const At=Symbol("is custom element"),It=Symbol("is html");function Mt(t,e,r,n){var a=kt(t);a[e]!==(a[e]=r)&&(r==null?t.removeAttribute(e):typeof r!="string"&&Pe(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function V(t,e,r){var n=Ke,a=$;oe(null),ue(null);try{e!=="style"&&(te.has(t.nodeName)||!customElements||customElements.get(t.tagName.toLowerCase())?Pe(t).includes(e):r&&typeof r=="object")?t[e]=r:Mt(t,e,r==null?r:String(r))}finally{oe(n),ue(a)}}function kt(t){return t.__attributes??(t.__attributes={[At]:t.nodeName.includes("-"),[It]:t.namespaceURI===je})}var te=new Map;function Pe(t){var e=te.get(t.nodeName);if(e)return e;te.set(t.nodeName,e=[]);for(var r,n=t,a=Element.prototype;a!==n;){r=$e(n);for(var i in r)r[i].set&&e.push(i);n=Qe(n)}return e}function _e(t,e){return t===e||(t==null?void 0:t[we])===e}function Re(t={},e,r,n){return et(()=>{var a,i;return me(()=>{a=i,i=[],q(()=>{t!==r(...i)&&(e(t,...i),a&&_e(r(...a),t)&&e(null,...a))})}),()=>{tt(()=>{i&&_e(r(...i),t)&&e(null,...i)})}}),t}let Y=!1;function Tt(t){var e=Y;try{return Y=!1,[t(),Y]}finally{Y=e}}function he(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function ge(t,e,r,n){var S;var a=(r&ut)!==0,i=!0,l=(r&lt)!==0,f=(r&ct)!==0,v=!1,d;l?[d,v]=Tt(()=>t[e]):d=t[e];var u=we in t||ot in t,w=l&&(((S=rt(t,e))==null?void 0:S.set)??(u&&e in t&&(b=>t[e]=b)))||void 0,c=n,y=!0,g=!1,_=()=>(g=!0,y&&(y=!1,f?c=q(n):c=n),c);d===void 0&&n!==void 0&&(w&&i&&nt(),d=_(),w&&w(d));var h;if(h=()=>{var b=t[e];return b===void 0?_():(y=!0,g=!1,b)},!(r&at))return h;if(w){var s=t.$$legacy;return function(b,E){return arguments.length>0?((!E||s||v)&&w(E?h():b),b):h()}}var p=!1,A=xe(d),x=it(()=>{var b=h(),E=o(A);return p?(p=!1,E):A.v=b});return l&&o(x),a||(x.equals=st),function(b,E){if(arguments.length>0){const k=E?o(x):l?re(b):b;if(!x.equals(k)){if(p=!0,M(A,k),g&&c!==void 0&&(c=k),he(x))return b;q(()=>o(x))}return b}return he(x)?x.v:o(x)}}function X(t){Se===null&&Me(),Ee(()=>{const e=q(t);if(typeof e=="function")return e})}function Pt(t){Se===null&&Me(),X(()=>()=>q(t))}var Rt=(t,e)=>M(e,!o(e)),Ct=D("<ion-icon></ion-icon>",2),Nt=D("<ion-icon></ion-icon>",2),Dt=(t,e,r)=>e(o(r)),Lt=D('<div class="flex text-gray-200 text-2xl w-[calc(100%_-_48px)] items-center mx-6 py-2 border-b-2 border-b-gray-600 last-of-type:border-b-0"><div class="grow text-center"> </div> <div><button aria-label="Remove player" class="hover:text-gray-400 cursor-pointer"><ion-icon></ion-icon></button></div></div>',2),Bt=D('<div class="text-red-500 absolute left-6 -top-1"> </div>'),Ot=D('<div class="top-0 right-0 h-screen fixed w-1/2 bg-gray-800 z-20 border-4 shadow-2xl shadow-gray-800 border-l-gray-600 flex flex-col"><div class="grow overflow-y-auto mt-20"></div> <form class="p-6 flex items-center justify-center relative" method="post"><!> <input type="text"> <button type="submit" class="ml-4 h-full border-4 border-green-500 rounded-xl aspect-square text-5xl text-green-500 cursor-pointer hover:bg-green-500/30" aria-label="Add player"><ion-icon></ion-icon></button></form></div>',2),Wt=D('<button aria-label="Manage Players"><!></button> <!>',1);function qt(t,e){ne(e,!0),console.log("hello world!");let r=R(!1),n=R(re(["bob","himbwafa","test1231"])),a=R(""),i=R(null);function l(_){_.preventDefault(),console.log("added plauer"),M(i,null),W("/add_user",{method:"post",body:o(a),headers:{"Content-Type":"text/plain"}}).then(async h=>{h.ok?(o(n).push(o(a)),M(a,"")):M(i,await h.text(),!0)})}function f(_){W("/remove_user",{method:"post",body:_,headers:{"Content-Type":"text/plain"}}).then(h=>{if(h.ok){const s=o(n).indexOf(_);s!==-1&&o(n).splice(s,1)}})}X(()=>{W("/get_users").then(_=>_.json()).then(_=>M(n,_,!0))});var v=Wt(),d=Ie(v);d.__click=[Rt,r];var u=I(d);{var w=_=>{var h=Ct();V(h,"name","people-outline"),N(_,h)},c=_=>{var h=Nt();V(h,"name","close"),N(_,h)};j(u,_=>{o(r)?_(c,!1):_(w)})}var y=P(d,2);{var g=_=>{var h=Ot(),s=I(h);Te(s,21,()=>o(n),ke,(T,m)=>{var C=Lt(),L=I(C),G=I(L),De=P(L,2),ie=I(De);ie.__click=[Dt,f,m];var Le=I(ie);V(Le,"name","trash-outline"),O(()=>F(G,o(m))),N(T,C)});var p=P(s,2),A=I(p);{var x=T=>{var m=Bt(),C=I(m);O(()=>F(C,o(i))),N(T,m)};j(A,T=>{o(i)!==null&&T(x)})}var S=P(A,2);let b;var E=P(S,2),k=I(E);V(k,"name","add"),O(T=>b=J(S,1,"w-full border-4 border-green-500 rounded-xl text-3xl text-gray-200 outline-none px-6 py-3 focus:ring-8 ring-green-500/30 [&.error]:border-red-500 [&.error]:ring-red-500/30",null,b,T),[()=>({error:o(i)!==null})]),ft("submit",p,l),dt(S,()=>o(a),T=>M(a,T)),N(_,h)};j(y,_=>{o(r)&&_(g)})}O(()=>J(d,1,`${(o(r)?"fixed":"absolute")??""} text-6xl text-gray-200 top-4 right-4 cursor-pointer hover:text-gray-400 z-30`)),N(t,v),ae()}Ae(["click"]);const zt="/static/main/aud/click-Hf2CT4va.wav",Ft=typeof window<"u"?window:void 0;function Ht(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}function Ut(t){M(t,t.v+1)}function Vt(t){let e=0,r=ee(0),n;return()=>{vt()&&(o(r),me(()=>(e===0&&(n=q(()=>t(()=>Ut(r)))),e+=1,()=>{_t().then(()=>{e-=1,e===0&&(n==null||n(),n=void 0)})})))}}var z,H;class Yt{constructor(e={}){Z(this,z);Z(this,H);const{window:r=Ft,document:n=r==null?void 0:r.document}=e;r!==void 0&&(K(this,z,n),K(this,H,Vt(a=>{const i=ce(r,"focusin",a),l=ce(r,"focusout",a);return()=>{i(),l()}})))}get current(){var e;return(e=U(this,H))==null||e.call(this),U(this,z)?Ht(U(this,z)):null}}z=new WeakMap,H=new WeakMap;new Yt;function Jt(t,e){switch(t){case"post":Ee(e);break;case"pre":ht(e);break}}function Ce(t,e,r,n={}){const{lazy:a=!1}=n;let i=!a,l=Array.isArray(t)?[]:void 0;Jt(e,()=>{const f=Array.isArray(t)?t.map(d=>d()):t();if(!i){i=!0,l=f;return}const v=q(()=>r(f,l));return l=f,v})}function Ne(t,e,r){Ce(t,"post",e,r)}function Xt(t,e,r){Ce(t,"pre",e,r)}Ne.pre=Xt;var Gt=D('<div class="roulette-segment svelte-c6q6t2"> </div>'),Zt=D('<div id="roulette-wheel" class="roulette-wheel svelte-c6q6t2"></div> <div class="w-10 h-10 bg-green-700 svelte-c6q6t2" id="pointer"></div>',1);function Kt(t,e){ne(e,!0);let r=ge(e,"isSpinning",15,!1),n=ge(e,"SPINTIME",3,15e3),a=null,i=R(void 0),l=0,f,v=null;async function d(){f=new window.AudioContext;try{const p=await(await fetch(zt)).arrayBuffer();v=await f.decodeAudioData(p),console.log("Click sound loaded successfully")}catch(s){console.error("Error loading sound:",s)}}function u(){if(!f||!v){console.warn("Audio not initialized or sound not loaded yet");return}const s=f.createBufferSource();s.buffer=v,s.connect(f.destination),s.start(0)}function w(s){const p=(1-s)**.3333333333333333;return(1-p)*(1-1.34*p+.91*p**2)}function c(s,p,A,x=!0){const S=x?A-1:A,b=(p-s)/S;return Array.from({length:A},(E,k)=>s+b*k)}function y(){if(r()||!a)return;r(!0);let s;for(;s=Math.floor(Math.random()*e.dares.length),!!e.dares.some((L,G)=>L.played&&G===s););M(i,s,!0);const p=parseFloat(a.style.transform.replace(/[^0-9.-]/g,""))||0,A=Math.floor(Math.abs(p)/360),x=o(i)/e.dares.length*360,S=Math.floor((Math.random()*2-1)*(180/e.dares.length)),b=(A+4)*360+x;a.style.transform=`rotate(-${b+S}deg)`;const E=360/e.dares.length,k=Math.abs(p-E/2)%E/E,T=Math.abs(b+S-E/2)%E/E,m=Math.floor((b-l)*(e.dares.length/360));c((1-k)/m,1-T/m,m).map(L=>n()*w(L)).forEach(L=>setTimeout(u,Math.max(0,L-100))),l=b,setTimeout(()=>{e.onSpinFinish(e.dares[o(i)]),r(!1),o(i)!==void 0&&W("/set_played",{method:"post",body:JSON.stringify({content:e.dares[o(i)].content,by:e.dares[o(i)].by})})},n())}function g(){W("/set_used",{method:"post"}).then(()=>{M(i,void 0)})}X(()=>{d()}),Ne(()=>n(),()=>{a&&(a.style.transitionDuration=`${n()}ms`)});var _=Zt(),h=Ie(_);return Te(h,21,()=>e.dares,ke,(s,p,A)=>{var x=Gt();ve(x,`--i: ${A??""};`);var S=I(x);O(()=>F(S,o(p).content)),N(s,x)}),Re(h,s=>a=s,()=>a),O(()=>ve(h,`--n: ${e.dares.length??""};`)),N(t,_),ae({spinWheel:y,resetWheel:g})}function Qt(t,e,r){var n;(n=o(e))==null||n.spinWheel(),W("/pick_user").then(a=>a.text()).then(a=>M(r,a,!0))}var jt=D('<div class="relative flex flex-col items-center justify-center min-h-screen bg-gray-800 overflow-hidden"><a href="/" class="absolute top-4 left-4 text-gray-200 text-xl underline">← Back to home page</a> <!> <h1 class="text-white text-3xl mb-4">Dare Roulette</h1> <!> <button id="spin-button" class="my-4 bg-green-500 transition-colors hover:bg-green-700 text-white px-4 py-2 rounded z-10 relative block cursor-pointer disabled:opacity-50 disabled:cursor-wait mb-40">Spin the Wheel</button> <div id="selected-dare"><span class="text-red-300"> </span><br> </div> <div>Waiting for submissions...</div> <div class="absolute right-5 bottom-5 text-2xl"><div><label for="allow-repeats" class="text-gray-200">Allow Repeats?</label> <input class="w-10 h-5" type="checkbox" name="allow-repeats" id="allow-repeats"></div> <div class="mt-8"><button class="bg-none boder-gray-200 border-2 rounded-xl px-6 py-3 text-gray-200 underline hover:no-underline cursor-pointer">Reset Wheel</button></div></div></div>');function $t(t,e){ne(e,!0);let r=R(re([])),n=R(!1),a=R(!1),i=R(""),l=R(void 0),f;X(()=>{f=setInterval(()=>{W("/get_dares").then(m=>m.json()).then(m=>{M(r,m,!0)})},1e3)}),Pt(()=>{clearInterval(f)});let v=R(void 0);function d(m){console.log("Hello world, this wheel has finished spinning."),M(i,m.content,!0)}var u=jt(),w=P(I(u),2);qt(w,{});var c=P(w,4);Re(Kt(c,{get dares(){return o(r)},onSpinFinish:d,get isSpinning(){return o(n)},set isSpinning(m){M(n,m,!0)}}),m=>M(v,m,!0),()=>o(v));var y=P(c,2);y.__click=[Qt,v,l];var g=P(y,2);let _;var h=I(g),s=I(h),p=P(h,2),A=P(g,2);let x;var S=P(A,2),b=I(S),E=P(I(b),2),k=P(b,2),T=I(k);T.__click=function(...m){var C;(C=o(v).resetWheel)==null||C.apply(this,m)},O((m,C)=>{y.disabled=o(n)||o(r).length<2,_=J(g,1,"text-white px-1 py-2 absolute w-full text-center shadow-[0_0_20px_20px_rgba(0,0,0,0.8)] bg-[rgba(0,0,0,0.8)] text-3xl font-bold drop-shadow-2xl",null,_,m),F(s,o(l)),F(p,` ${o(i)??""}`),x=J(A,1,"absolute text-gray-400 text-7xl",null,x,C)},[()=>({hidden:o(n)||!o(i)||o(r).length<2}),()=>({hidden:o(r).length>=2})]),gt(E,()=>o(a),m=>M(a,m)),N(t,u),ae()}Ae(["click"]);pt($t,{target:document.getElementById("app")});
