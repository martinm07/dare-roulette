var Ot=Object.defineProperty;var Je=t=>{throw TypeError(t)};var zt=(t,e,r)=>e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ye=(t,e,r)=>zt(t,typeof e!="symbol"?e+"":e,r),Ve=(t,e,r)=>e.has(t)||Je("Cannot "+r);var q=(t,e,r)=>(Ve(t,e,"read from private field"),r?r.call(t):e.get(t)),pe=(t,e,r)=>e.has(t)?Je("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);var oe=(t,e,r)=>(Ve(t,e,"access private method"),r);import{l as Ke,n as Nt,E as Bt,B as Lt,o as jt,q as qt,u as ce,T as Ut,w as Gt,r as Ht,v as Jt,x as G,y as Xe,z as Ze,A as Yt,C as Vt,D as Kt,F as Xt,G as nt,g as n,s as u,H as Zt,I as Qt,P as $t,J as er,K as tr,L as ye,M as rr,S as nr,N as ar,O as or,Q as sr,R as at,U as ir,a as A,d as Ce,p as me,t as I,V as le,i as L,W as B,b as T,e as we,k as Y,X as ot,c as v,f as k,Y as V,h as st,j as it,Z as Qe,_ as $e,m as lr}from"./svelte-DtLJqUBj.js";import{t as cr,w as lt,s as $,e as Ie,i as Ee,a as te,b as _e,P as ur}from"./persisted-state.svelte-D1YmG_A9.js";/* empty css                 *//* empty css                      */function ct(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function xe(t,e,r,a){var s=t.__style;if(s!==e){var i=cr(e);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}return a}const dr=()=>performance.now(),K={tick:t=>requestAnimationFrame(t),now:()=>dr(),tasks:new Set};function ut(){const t=K.now();K.tasks.forEach(e=>{e.c(t)||(K.tasks.delete(e),e.f())}),K.tasks.size!==0&&K.tick(ut)}function fr(t){let e;return K.tasks.size===0&&K.tick(ut),{promise:new Promise(r=>{K.tasks.add(e={c:t,f:r})}),abort(){K.tasks.delete(e)}}}function et(t,e){Gt(()=>{t.dispatchEvent(new CustomEvent(e))})}function vr(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function tt(t){const e={},r=t.split(";");for(const a of r){const[s,i]=a.split(":");if(!s||i===void 0)break;const f=vr(s.trim());e[f]=i.trim()}return e}const _r=t=>t;function hr(t,e,r,a){var s=(t&Ut)!==0,i="in",f,g=e.inert,C=e.style.overflow,l,W;function E(){var w=Yt,d=Ke;Xe(null),Ze(null);try{return f??(f=r()(e,(a==null?void 0:a())??{},{direction:i}))}finally{Xe(w),Ze(d)}}var p={is_global:s,in(){e.inert=g,l==null||l.abort(),et(e,"introstart"),l=dt(e,E(),W,1,()=>{et(e,"introend"),l==null||l.abort(),l=f=void 0,e.style.overflow=C})},out(w){{w==null||w(),f=void 0;return}},stop:()=>{l==null||l.abort()}},b=Ke;if((b.transitions??(b.transitions=[])).push(p),Nt){var m=s;if(!m){for(var S=b.parent;S&&S.f&Bt;)for(;(S=S.parent)&&!(S.f&Lt););m=!S||(S.f&jt)!==0}m&&qt(()=>{ce(()=>p.in())})}}function dt(t,e,r,a,s){if(Ht(e)){var i,f=!1;return Jt(()=>{if(!f){var S=e({direction:"in"});i=dt(t,S,r,a,s)}}),{abort:()=>{f=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(!(e!=null&&e.duration))return s(),{abort:G,deactivate:G,reset:G,t:()=>a};const{delay:g=0,css:C,tick:l,easing:W=_r}=e;var E=[];if(l&&l(0,1),C){var p=tt(C(0,1));E.push(p,p)}var b=()=>1-a,m=t.animate(E,{duration:g});return m.onfinish=()=>{var S=1-a,w=a-S,d=e.duration*Math.abs(w),x=[];if(d>0){var D=!1;if(C)for(var c=Math.ceil(d/16.666666666666668),y=0;y<=c;y+=1){var _=S+w*W(y/c),P=tt(C(_,1-_));x.push(P),D||(D=P.overflow==="hidden")}D&&(t.style.overflow="hidden"),b=()=>{var F=m.currentTime;return S+w*W(F/d)},l&&fr(()=>{if(m.playState!=="running")return!1;var F=b();return l(F,1-F),!0})}m=t.animate(x,{duration:d,fill:"forwards"}),m.onfinish=()=>{b=()=>a,l==null||l(a,1-a),s()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=G)},deactivate:()=>{s=G},reset:()=>{},t:()=>b()}}function ft(t,e,r){if(t==null)return e(void 0),G;const a=ce(()=>t.subscribe(e,r));return a.unsubscribe?()=>a.unsubscribe():a}const se=[];function br(t,e=G){let r=null;const a=new Set;function s(g){if(Vt(t,g)&&(t=g,r)){const C=!se.length;for(const l of a)l[1](),se.push(l,t);if(C){for(let l=0;l<se.length;l+=2)se[l][0](se[l+1]);se.length=0}}}function i(g){s(g(t))}function f(g,C=G){const l=[g,C];return a.add(l),a.size===1&&(r=e(s,i)||G),g(t),()=>{a.delete(l),a.size===0&&r&&(r(),r=null)}}return{set:s,update:i,subscribe:f}}function pr(t){let e;return ft(t,r=>e=r)(),e}let ge=!1,Te=Symbol();function gr(t,e,r){const a=r[e]??(r[e]={store:null,source:nt(void 0),unsubscribe:G});if(a.store!==t&&!(Te in r))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=G;else{var s=!0;a.unsubscribe=ft(t,i=>{s?a.source.v=i:u(a.source,i)}),s=!1}return t&&Te in r?pr(t):n(a.source)}function xr(){const t={};function e(){Kt(()=>{for(var r in t)t[r].unsubscribe();Xt(t,Te,{enumerable:!1,value:!0})})}return[t,e]}function yr(t){var e=ge;try{return ge=!1,[t(),ge]}finally{ge=e}}function rt(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function ie(t,e,r,a){var y;var s=(r&or)!==0,i=!0,f=(r&rr)!==0,g=(r&sr)!==0,C=!1,l;f?[l,C]=yr(()=>t[e]):l=t[e];var W=nr in t||ar in t,E=f&&(((y=Zt(t,e))==null?void 0:y.set)??(W&&e in t&&(_=>t[e]=_)))||void 0,p=a,b=!0,m=!1,S=()=>(m=!0,b&&(b=!1,g?p=ce(a):p=a),p);l===void 0&&a!==void 0&&(E&&i&&Qt(),l=S(),E&&E(l));var w;if(w=()=>{var _=t[e];return _===void 0?S():(b=!0,m=!1,_)},!(r&$t))return w;if(E){var d=t.$$legacy;return function(_,P){return arguments.length>0?((!P||d||C)&&E(P?w():_),_):w()}}var x=!1,D=nt(l),c=er(()=>{var _=w(),P=n(D);return x?(x=!1,P):D.v=_});return f&&n(c),s||(c.equals=tr),function(_,P){if(arguments.length>0){const F=P?n(c):f?ye(_):_;if(!c.equals(F)){if(x=!0,u(D,F),m&&p!==void 0&&(p=F),rt(c))return _;ce(()=>n(c))}return _}return rt(c)?c.v:n(c)}}function ke(t){at===null&&ct(),ir(()=>{const e=ce(t);if(typeof e=="function")return e})}function mr(t){at===null&&ct(),ke(()=>()=>ce(t))}function wr(){return`hsl(${Math.floor(Math.random()*360)}, 70%, 85%)`}const vt=br(0);function kr(t){return!!t&&typeof t=="object"&&"to"in t&&"from"in t&&"event"in t&&"args"in t}var U,ee,X,_t,ve;class Sr{constructor(e,r){pe(this,X);pe(this,U,A());Ye(this,"states");pe(this,ee,{});u(q(this,U),e,!0),this.states=r,this.send=this.send.bind(this),this.debounce=this.debounce.bind(this),oe(this,X,ve).call(this,"_enter",{from:null,to:e,event:null,args:[]})}send(e,...r){const a=oe(this,X,ve).call(this,e,...r);return a&&a!==n(q(this,U))&&oe(this,X,_t).call(this,a,e,r),n(q(this,U))}async debounce(e=500,r,...a){return q(this,ee)[r]&&clearTimeout(q(this,ee)[r]),new Promise(s=>{q(this,ee)[r]=setTimeout(()=>{delete q(this,ee)[r],s(this.send(r,...a))},e)})}get current(){return n(q(this,U))}}U=new WeakMap,ee=new WeakMap,X=new WeakSet,_t=function(e,r,a){const s={from:n(q(this,U)),to:e,event:r,args:a};oe(this,X,ve).call(this,"_exit",s),u(q(this,U),e,!0),oe(this,X,ve).call(this,"_enter",s)},ve=function(e,...r){var s,i;const a=((s=this.states[n(q(this,U))])==null?void 0:s[e])??((i=this.states["*"])==null?void 0:i[e]);if(a instanceof Function)if(e==="_enter"||e==="_exit")kr(r[0])?a(r[0]):console.warn("Invalid metadata passed to lifecycle function of the FSM.");else return a(...r);else{if(typeof a=="string")return a;e!=="_enter"&&e!=="_exit"&&console.warn("No action defined for event",e,"in state",n(q(this,U)))}};var Pr=(t,e)=>e()==="players"?e("closed"):e("players"),Mr=I("<ion-icon></ion-icon>",2),Tr=I("<ion-icon></ion-icon>",2),Cr=(t,e,r)=>e(n(r)),Ir=I('<div class="flex text-gray-200 text-2xl w-[calc(100%_-_48px)] items-center mx-6 py-2 border-b-2 border-b-gray-600 last-of-type:border-b-0"><div class="grow text-center"> </div> <div><button aria-label="Remove player" class="hover:text-gray-400 cursor-pointer"><ion-icon></ion-icon></button></div></div>',2),Er=I('<div class="text-red-500 absolute left-6 -top-1"> </div>'),Rr=I('<div class="top-0 right-0 h-screen fixed w-1/2 bg-gray-800 z-20 border-4 shadow-2xl shadow-gray-800 border-l-gray-600 flex flex-col"><div class="grow overflow-y-auto mt-20"></div> <form class="p-6 flex items-center justify-center relative" method="post"><!> <input type="text"> <button type="submit" class="ml-4 h-full border-4 border-green-500 rounded-xl aspect-square text-5xl text-green-500 cursor-pointer hover:bg-green-500/30" aria-label="Add player"><ion-icon></ion-icon></button></form></div>',2),Ar=I('<button id="toggle-players-menu" aria-label="Manage Players"><!></button> <!>',1);function Dr(t,e){me(e,!0),console.log("hello world!");let r=ie(e,"menusState",15,"closed"),a=ot(()=>r()==="players"),s=A(ye([]));lt(()=>n(s).length,()=>{vt.set(n(s).length)});let i=A(""),f=A(null);function g(d){d.preventDefault(),console.log("added plauer"),u(f,null),Y("/add_user",{method:"post",body:n(i),headers:{"Content-Type":"text/plain"}}).then(async x=>{x.ok?(n(s).push(n(i)),u(i,"")):u(f,await x.text(),!0)})}function C(d){Y("/remove_user",{method:"post",body:d,headers:{"Content-Type":"text/plain"}}).then(x=>{if(x.ok){const D=n(s).indexOf(d);D!==-1&&n(s).splice(D,1)}})}function l(){Y("/remove_all_users",{method:"post"}).then(d=>{d.ok&&u(s,[],!0)})}ke(()=>{Y("/get_users").then(d=>d.json()).then(d=>u(s,d,!0))});var W=Ar(),E=le(W);E.__click=[Pr,r];var p=v(E);{var b=d=>{var x=Mr();$(x,"name","people-outline"),T(d,x)},m=d=>{var x=Tr();$(x,"name","close"),T(d,x)};L(p,d=>{n(a)?d(m,!1):d(b)})}var S=k(E,2);{var w=d=>{var x=Rr(),D=v(x);Ie(D,21,()=>n(s),Ee,(O,M)=>{var z=Ir(),Z=v(z),H=v(Z),re=k(Z,2),ue=v(re);ue.__click=[Cr,C,M];var he=v(ue);$(he,"name","trash-outline"),B(()=>V(H,n(M))),T(O,z)});var c=k(D,2),y=v(c);{var _=O=>{var M=Er(),z=v(M);B(()=>V(z,n(f))),T(O,M)};L(y,O=>{n(f)!==null&&O(_)})}var P=k(y,2);let F;var R=k(P,2),N=v(R);$(N,"name","add"),B(O=>F=te(P,1,"w-full border-4 border-green-500 rounded-xl text-3xl text-gray-200 outline-none px-6 py-3 focus:ring-8 ring-green-500/30 [&.error]:border-red-500 [&.error]:ring-red-500/30",null,F,O),[()=>({error:n(f)!==null})]),st("submit",c,g),it(P,()=>n(i),O=>u(i,O)),T(d,x)};L(S,d=>{n(a)&&d(w)})}return B(()=>te(E,1,`${(n(a)?"fixed":"absolute")??""} text-6xl text-gray-200 top-4 right-4 cursor-pointer hover:text-gray-400 z-30`)),T(t,W),we({resetPlayers:l})}Ce(["click"]);const Fr="/static/main/aud/click-Hf2CT4va.wav";var Wr=I("<div><!></div>"),Or=I('<div id="roulette-wheel" class="roulette-wheel svelte-3khc5n"></div> <div class="w-20 h-20 bg-green-500 svelte-3khc5n" id="pointer"></div>',1);function zr(t,e){me(e,!0);let r=ie(e,"isSpinning",15,!1),a=ie(e,"disabled",3,!1),s=ie(e,"showWheelDares",3,!1),i=ie(e,"SPINTIME",3,15e3),f=null,g=A(void 0),C=0,l,W=null;async function E(){l=new window.AudioContext;try{const y=await(await fetch(Fr)).arrayBuffer();W=await l.decodeAudioData(y),console.log("Click sound loaded successfully")}catch(c){console.error("Error loading sound:",c)}}function p(){if(!l||!W){console.warn("Audio not initialized or sound not loaded yet");return}const c=l.createBufferSource();c.buffer=W,c.connect(l.destination),c.start(0)}function b(c){const y=(1-c)**.3333333333333333;return(1-y)*(1-1.34*y+.91*y**2)}function m(c,y,_,P=!0){const F=P?_-1:_,R=(y-c)/F;return Array.from({length:_},(N,O)=>c+R*O)}function S(){if(r()||!f)return;r(!0);let c;for(;c=Math.floor(Math.random()*e.dares.length),!!e.dares.some((H,re)=>H.played&&re===c););u(g,c,!0);const y=parseFloat(f.style.transform.replace(/[^0-9.-]/g,""))||0,_=Math.floor(Math.abs(y)/360),P=n(g)/e.dares.length*360,F=Math.floor((Math.random()*2-1)*(180/e.dares.length)),R=(_+4)*360+P;f.style.transform=`rotate(-${R+F}deg)`;const N=360/e.dares.length,O=Math.abs(y-N/2)%N/N,M=Math.abs(R+F-N/2)%N/N,z=Math.floor((R-C)*(e.dares.length/360));m((1-O)/z,1-M/z,z).map(H=>i()*b(H)).forEach(H=>setTimeout(p,Math.max(0,H-100))),C=R,setTimeout(()=>{e.onSpinFinish(e.dares[n(g)]),r(!1),n(g)!==void 0&&Y("/set_played",{method:"post",body:JSON.stringify({content:e.dares[n(g)].content,by:e.dares[n(g)].by})})},i())}function w(){Y("/set_used",{method:"post"}).then(()=>{u(g,void 0)})}let d=ye([]);ke(()=>{E()}),lt(()=>i(),()=>{f&&(f.style.transitionDuration=`${i()}ms`)});var x=Or(),D=le(x);return Ie(D,21,()=>e.dares,Ee,(c,y,_)=>{var P=Wr();let F;var R=v(P);{var N=M=>{var z=Qe();B(()=>V(z,n(y).content)),T(M,z)},O=M=>{var z=Qe();z.nodeValue=`Mysterious #${_+1}`,T(M,z)};L(R,M=>{s()?M(N):M(O,!1)})}_e(P,(M,z)=>d[z]=M,M=>d==null?void 0:d[M],()=>[_]),B(M=>{F=te(P,1,"roulette-segment [.inactive]:text-gray-400 text-gray-800 font-bold svelte-3khc5n",null,F,M),xe(P,`--i: ${_??""}; background-color: ${n(y).colour??""};`)},[()=>({inactive:a()})]),T(c,P)}),_e(D,c=>f=c,()=>f),B(()=>xe(D,`--n: ${e.dares.length??""};`)),T(t,x),we({spinWheel:S,resetWheel:w})}const Nr=t=>t;function Br(t,{delay:e=0,duration:r=400,easing:a=Nr}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:a,css:i=>`opacity: ${i*s}`}}var Lr=(t,e)=>e()==="dares"?e("closed"):e("dares"),jr=I("<ion-icon></ion-icon>",2),qr=I("<ion-icon></ion-icon>",2),Ur=(t,e,r)=>e(n(r).content,n(r).by),Gr=I('<div class="flex text-gray-200 text-2xl w-[calc(100%_-_48px)] items-center mx-6 py-2 border-b-2 border-b-gray-600 last-of-type:border-b-0"><div class="grow text-center"> </div> <div><button aria-label="Remove player" class="hover:text-gray-400 cursor-pointer"><ion-icon></ion-icon></button></div></div>',2),Hr=I('<div class="top-0 right-0 h-screen fixed w-1/2 bg-gray-800 z-20 border-4 shadow-2xl shadow-gray-800 border-l-gray-600 flex flex-col"><div class="grow overflow-y-auto mt-20"></div></div>'),Jr=I('<button id="toggle-dares-menu" aria-label="Manage Players"><!></button> <!>',1);function Yr(t,e){me(e,!0);let r=ie(e,"menusState",15,"closed"),a=ot(()=>r()==="dares");function s(p,b){Y("/set_used_individual",{method:"post",body:JSON.stringify({content:p,by:b})})}var i=Jr(),f=le(i);f.__click=[Lr,r];var g=v(f);{var C=p=>{var b=jr();$(b,"name","chatbubbles-outline"),T(p,b)},l=p=>{var b=qr();$(b,"name","close"),T(p,b)};L(g,p=>{n(a)?p(l,!1):p(C)})}var W=k(f,2);{var E=p=>{var b=Hr(),m=v(b);Ie(m,21,()=>e.dares,Ee,(S,w)=>{var d=Gr(),x=v(d),D=v(x),c=k(x,2),y=v(c);y.__click=[Ur,s,w];var _=v(y);$(_,"name","trash-outline"),B(()=>V(D,n(w).content)),T(S,d)}),T(p,b)};L(W,p=>{n(a)&&p(E)})}B(()=>te(f,1,`${(n(a)?"fixed":"absolute")??""} text-6xl text-gray-200 top-4 right-24 cursor-pointer hover:text-gray-400 z-30`)),T(t,i),we()}Ce(["click"]);function Vr(t,e,r,a){u(e,!0),Y("/pick_user").then(s=>s.text()).then(s=>u(r,s,!0)),a.debounce(1500,"startdares")}function Kr(t,e){var r;(r=n(e))==null||r.spinWheel()}var Xr=I('<button id="choose-player-button" class="my-4 transition-all px-4 py-2 rounded-2xl z-10 relative block cursor-pointer disabled:opacity-50 disabled:cursor-wait mb-40 border-8 border-green-500 text-green-500 text-2xl font-bold hover:px-8 ring-green-500/30 hover:ring-8 hover:bg-green-500/30 hover:text-green-400 disabled:pointer-events-none">Select the Victim</button>'),Zr=I('<button id="spin-button" class="my-4 bg-green-500 transition-colors hover:bg-green-700 text-white px-4 py-2 rounded z-10 relative block cursor-pointer disabled:opacity-50 disabled:cursor-wait mb-40">Spin the Wheel!!!</button>'),Qr=I('<span id="display-user" class="text-red-300 relative z-50 transition-all duration-1000 group-[.choice]:text-gray-600"> </span>'),$r=I('<br><span id="display-dare" class="relative z-50 transition-all duration-1000 group-[.choice]:!text-gray-700"> </span>',1),en=(t,e,r,a)=>{u(e,r(),!0),u(a,"forfeit")},tn=(t,e)=>{u(e,"accept")},rn=I('<button class="cursor-pointer px-8 py-4 text-2xl text-red-700 border-8 rounded-2xl border-red-700 transition-colors hover:bg-red-700/30 hover:text-red-900 mr-8">Forfeit</button> <button class="cursor-pointer px-8 py-4 text-2xl text-green-700 border-8 rounded-2xl border-green-700 transition-colors hover:bg-green-700/30 hover:text-green-900">Accept</button>',1),nn=I(`<span class="text-green-700 text-2xl">We're waiting...</span>`),an=I('<span class="text-red-700 text-2xl"> </span>'),on=I('<!> <button class="ml-6 text-2xl underline hover:no-underline text-gray-700 cursor-pointer"> </button>',1),sn=I('<div class="text-center mt-4 absolute w-full"><!></div>'),ln=(t,e)=>{var r;(r=n(e))==null||r.showModal()},cn=(t,e)=>{var r;return(r=n(e))==null?void 0:r.close()},un=I('<div class="text-red-500 text-xl">Password incorrect</div>'),dn=I('<div><a href="/" class="absolute top-4 left-4 text-gray-200 text-xl underline">← Back to home page</a> <!> <!> <h1 class="text-white text-3xl mb-4 mt-3"> </h1> <span class="flex flex-col items-center"><!></span> <span><!></span> <div id="selected-dare"><!> <!> <!></div> <div>Waiting for submissions...</div> <div class="absolute right-5 bottom-5 text-2xl text-right"><div><label for="allow-repeats" class="text-gray-200">Allow Repeats?</label> <input class="w-10 h-5" type="checkbox" name="allow-repeats" id="allow-repeats"></div> <div class="mt-4"><label for="reveal-wheel-dares" class="text-gray-200">Show Dares on Wheel</label> <input class="w-10 h-5" type="checkbox" name="reveal-wheel-dares" id="reveal-wheel-dares"></div> <div class="mt-8"><button class="bg-none boder-gray-200 border-2 rounded-xl px-6 py-3 text-gray-200 underline hover:no-underline cursor-pointer">Reset Wheel</button></div> <div class="mt-8 text-right"><button class="cursor-pointer underline text-xl text-red-700 hover:no-underline">Reset Game</button></div></div> <dialog class="fixed p-4 top-1/2 left-1/2 -translate-1/2 bg-gray-800"><button aria-label="Close" class="absolute top-0 left-0 text-5xl cursor-pointer text-gray-200"><ion-icon></ion-icon></button> <form method="post" class="my-8"><div class="flex justify-center items-center flex-col sm:flex-row"><input type="text" name="password" id="password" placeholder="Password" class="bg-gray-100 p-4 text-xl focus:outline-none font-mono border-2 border-gray-400 rounded-lg"> <button type="submit" class="ml-5 bg-gray-200 transition-all hover:bg-gray-400 text-gray-800 font-bold px-6 py-3 rounded z-10 relative cursor-pointer disabled:opacity-50 disabled:cursor-wait text-xl mt-4 sm:mt-0">Check Password</button></div> <!></form></dialog></div>',2);function fn(t,e){me(e,!0);const[r,a]=xr(),s=()=>gr(vt,"$playerCount",r);let i=A(ye([])),f=A(void 0),g=A("closed"),C=A(void 0),l=A(!1);const W=new ur("round",1);let E=A(!1),p=A(!1),b=A(!1),m=A(""),S=A(""),w=A(void 0),d;ke(()=>{d=setInterval(()=>{R.current==="player"&&Y("/get_dares").then(o=>o.json()).then(o=>{for(let h=0;h<o.length;h++)h>=n(i).length?o[h].colour=wr():o[h].colour=n(i)[h].colour;u(i,o,!0)})},1e3)}),mr(()=>{clearInterval(d)});let x=A(!1),D=A(!1),c=A(null),y=A("");function _(o){console.log("Hello world, this wheel has finished spinning."),u(m,o.content,!0),u(S,o.colour,!0),R.debounce(1e3,"startchoice"),setTimeout(()=>u(D,!0),2200)}const P=["Take 1 shot","Take 2 shots","Take 3 shots","Take 4 shots"];function F(){return P[Math.floor(Math.random()*P.length)]}const R=new Sr("player",{player:{_enter:()=>{u(m,""),u(S,""),u(w,void 0),u(l,!0),u(x,!1),u(D,!1),u(c,null),u(y,"")},startdares:"dares"},dares:{_enter:()=>{u(l,!1)},startchoice:"choice"},choice:{startplayer:"player"}});let N=A(""),O=A(!1),M=A(void 0);function z(o){o.preventDefault(),console.log("checking password"),u(O,!1),Y("/check_password",{method:"post",body:n(N),headers:{"Content-Type":"text/plain"}}).then(h=>h.json()).then(h=>{var j,J,Q;u(N,""),h?(console.log("Hello world! Password correct. Doing funky things..."),(j=n(M))==null||j.close(),W.current=1,R.send("startdares"),R.send("startchoice"),R.send("startplayer"),(J=n(f))==null||J.resetWheel(),(Q=n(C))==null||Q.resetPlayers()):u(O,!0)})}var Z=dn();let H;var re=k(v(Z),2);_e(Dr(re,{get menusState(){return n(g)},set menusState(o){u(g,o,!0)}}),o=>u(C,o,!0),()=>n(C));var ue=k(re,2);Yr(ue,{get dares(){return n(i)},get menusState(){return n(g)},set menusState(o){u(g,o,!0)}});var he=k(ue,2),ht=v(he),Re=k(he,2),bt=v(Re);_e(zr(bt,{get dares(){return n(i)},onSpinFinish:_,get disabled(){return n(l)},get showWheelDares(){return n(b)},get isSpinning(){return n(E)},set isSpinning(o){u(E,o,!0)}}),o=>u(f,o,!0),()=>n(f));var Ae=k(Re,2),pt=v(Ae);{var gt=o=>{var h=Xr();h.__click=[Vr,x,w,R],B(()=>h.disabled=n(x)||n(i).length<2||s()<1),T(o,h)},xt=(o,h)=>{{var j=J=>{var Q=Zr();Q.__click=[Kr,f],B(()=>Q.disabled=n(E)||n(i).length<2),T(J,Q)};L(o,J=>{(R.current==="dares"||R.current==="choice")&&J(j)},h)}};L(pt,o=>{R.current==="player"?o(gt):o(xt,!1)})}var Se=k(Ae,2);let De;var Fe=v(Se);{var yt=o=>{var h=Qr(),j=v(h);B(()=>V(j,n(w))),T(o,h)};L(Fe,o=>{n(w)&&o(yt)})}var We=k(Fe,2);{var mt=o=>{var h=$r(),j=k(le(h)),J=v(j);B(()=>{xe(j,`color: ${n(S)??""};`),V(J,n(m))}),T(o,h)};L(We,o=>{n(m)&&o(mt)})}var wt=k(We,2);{var kt=o=>{var h=sn(),j=v(h);{var J=ne=>{var de=rn(),fe=le(de);fe.__click=[en,y,F,c];var Me=k(fe,2);Me.__click=[tn,c],T(ne,de)},Q=ne=>{var de=on(),fe=le(de);{var Me=ae=>{var be=nn();T(ae,be)},Dt=ae=>{var be=an(),Wt=v(be);B(()=>V(Wt,n(y))),T(ae,be)};L(fe,ae=>{n(c)==="accept"?ae(Me):ae(Dt,!1)})}var He=k(fe,2);He.__click=()=>{R.send("startplayer"),W.current+=1};var Ft=v(He);B(()=>V(Ft,n(c)==="accept"?"We're finished waiting":"Continue")),T(ne,de)};L(j,ne=>{n(c)===null?ne(J):ne(Q,!1)})}hr(1,h,()=>Br,()=>({duration:1e3})),T(o,h)};L(wt,o=>{n(D)&&o(kt)})}var Oe=k(Se,2);let ze;var Ne=k(Oe,2),Be=v(Ne),St=k(v(Be),2),Le=k(Be,2),Pt=k(v(Le),2),je=k(Le,2),Mt=v(je);Mt.__click=function(...o){var h;(h=n(f).resetWheel)==null||h.apply(this,o)};var Tt=k(je,2),Ct=v(Tt);Ct.__click=[ln,M];var qe=k(Ne,2),Pe=v(qe);Pe.__click=[cn,M];var It=v(Pe);$(It,"name","close");var Ue=k(Pe,2),Ge=v(Ue),Et=v(Ge),Rt=k(Ge,2);{var At=o=>{var h=un();T(o,h)};L(Rt,o=>{n(O)&&o(At)})}_e(qe,o=>u(M,o),()=>n(M)),B((o,h,j)=>{H=te(Z,1,"app-container relative flex flex-col items-center justify-center min-h-screen bg-gray-800 overflow-hidden group",null,H,o),xe(Z,`transition: background-color 1s linear; ${(R.current==="choice"?`background-color: ${n(S)}`:"")??""}`),V(ht,`Round ${W.current??""} (Players: ${s()??""})`),De=te(Se,1,"text-white px-1 py-2 absolute w-full text-center shadow-[0_0_20px_20px_rgba(0,0,0,0.8)] bg-[rgba(0,0,0,0.8)] text-3xl font-bold drop-shadow-2xl -mt-[230px] transition-all duration-1000 group-[.choice]:shadow-[0_0_20px_20px_rgba(0,0,0,0)] group-[.choice]:bg-[rgba(0,0,0,0)]",null,De,h),ze=te(Oe,1,"absolute text-gray-400 text-7xl",null,ze,j)},[()=>({choice:R.current==="choice"}),()=>({hidden:!n(w)&&!n(m)}),()=>({hidden:n(i).length>=2})]),$e(St,()=>n(p),o=>u(p,o)),$e(Pt,()=>n(b),o=>u(b,o)),st("submit",Ue,z),it(Et,()=>n(N),o=>u(N,o)),T(t,Z),we(),a()}Ce(["click"]);lr(fn,{target:document.getElementById("app")});
