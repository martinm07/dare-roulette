import{o as be,b as ye,i as u,q as xe,r as ae,a as se,p as we,I as J,u as ie,v as Q,w as me,x as ke,y as Y,z as Ee,A as Me,B as Ae,C as Ie,D as Se,F as Te,G as Ce,H as Re,J as Be,K as Ne,L as De,M as U,N as ze,S as We,O as oe,P as He,d as Fe,c as Le,e as H,Q as Oe,t as ue,f as M,j as R,R as Z,T as Pe,g as j,h as $e,m as L,s as A,V,n as qe}from"./svelte-CJBn0zUV.js";/* empty css                 *//* empty css                      */function fe(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Je=!1;function Ve(t,e){return e}function Ue(t,e,n,r){for(var s=[],l=e.length,f=0;f<l;f++)Me(e[f].e,s,!0);var h=l>0&&s.length===0&&n!==null;if(h){var _=n.parentNode;Ae(_),_.append(n),r.clear(),I(t,e[0].prev,e[l-1].next)}Ie(s,()=>{for(var i=0;i<l;i++){var a=e[i];h||(r.delete(a.k),I(t,a.prev,a.next)),Se(a.e,!h)}})}function Xe(t,e,n,r,s,l=null){var f=t,h={flags:e,items:new Map,first:null};{var _=t;f=_.appendChild(be())}var i=null,a=!1,g=xe(()=>{var o=n();return Be(o)?o:o==null?[]:ie(o)});ye(()=>{var o=u(g),d=o.length;a&&d===0||(a=d===0,Ge(o,h,f,s,e,r,n),l!==null&&(d===0?i?ae(i):i=se(()=>l(f)):i!==null&&we(i,()=>{i=null})),u(g))})}function Ge(t,e,n,r,s,l,f){var h=t.length,_=e.items,i=e.first,a=i,g,o=null,d=[],v=[],k,E,p,x;for(x=0;x<h;x+=1){if(k=t[x],E=l(k,x),p=_.get(E),p===void 0){var F=a?a.e.nodes_start:n;o=Qe(F,e,o,o===null?e.first:o.next,k,E,x,r,s,f),_.set(E,o),d=[],v=[],a=o.next;continue}if(Ke(p,k,x),p.e.f&J&&ae(p.e),p!==a){if(g!==void 0&&g.has(p)){if(d.length<v.length){var w=v[0],y;o=w.prev;var B=d[0],N=d[d.length-1];for(y=0;y<d.length;y+=1)ee(d[y],w,n);for(y=0;y<v.length;y+=1)g.delete(v[y]);I(e,B.prev,N.next),I(e,o,B),I(e,N,w),a=w,o=N,x-=1,d=[],v=[]}else g.delete(p),ee(p,a,n),I(e,p.prev,p.next),I(e,p,o===null?e.first:o.next),I(e,o,p),o=p;continue}for(d=[],v=[];a!==null&&a.k!==E;)a.e.f&J||(g??(g=new Set)).add(a),v.push(a),a=a.next;if(a===null)continue;p=a}d.push(p),o=p,a=p.next}if(a!==null||g!==void 0){for(var D=g===void 0?[]:ie(g);a!==null;)a.e.f&J||D.push(a),a=a.next;var O=D.length;if(O>0){var P=h===0?n:null;Ue(e,D,P,_)}}Q.first=e.first&&e.first.e,Q.last=o&&o.e}function Ke(t,e,n,r){me(t.v,e),t.i=n}function Qe(t,e,n,r,s,l,f,h,_,i){var a=(_&Ce)!==0,g=(_&Re)===0,o=a?g?ke(s):Y(s):s,d=_&Ee?Y(f):f,v={i:d,v:o,k:l,a:null,e:null,prev:n,next:r};try{return v.e=se(()=>h(t,o,d,i),Je),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?e.first=v:(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function ee(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,l=t.e.nodes_start;l!==r;){var f=Te(l);s.before(l),l=f}}function I(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const te=[...` 	
\r\f \v\uFEFF`];function Ye(t,e,n){var r=t==null?"":""+t;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var l=s.length,f=0;(f=r.indexOf(s,f))>=0;){var h=f+l;(f===0||te.includes(r[f-1]))&&(h===r.length||te.includes(r[h]))?r=(f===0?"":r.substring(0,f))+r.substring(h+1):f=h}}return r===""?null:r}function Ze(t,e){return t==null?null:String(t)}function ne(t,e,n,r,s,l){var f=t.__className;if(f!==n||f===void 0){var h=Ye(n,r,l);h==null?t.removeAttribute("class"):t.className=h,t.__className=n}else if(l&&s!==l)for(var _ in l){var i=!!l[_];(s==null||i!==!!s[_])&&t.classList.toggle(_,i)}return l}function re(t,e,n,r){var s=t.__style;if(s!==e){var l=Ze(e);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}return r}function le(t,e){return t===e||(t==null?void 0:t[We])===e}function je(t={},e,n,r){return Ne(()=>{var s,l;return De(()=>{s=l,l=[],U(()=>{t!==n(...l)&&(e(t,...l),s&&le(n(...s),t)&&e(null,...s))})}),()=>{ze(()=>{l&&le(n(...l),t)&&e(null,...l)})}}),t}function ce(t){oe===null&&fe(),He(()=>{const e=U(t);if(typeof e=="function")return e})}function et(t){oe===null&&fe(),ce(()=>()=>U(t))}const tt="/static/main/aud/click-Hf2CT4va.wav";function nt(t,e){L("/set_used",{method:"post"}).then(()=>{A(e,void 0)})}var rt=ue('<div class="roulette-segment svelte-vnofsz"> </div>'),lt=ue('<div class="relative flex flex-col items-center justify-center min-h-screen bg-gray-800 overflow-hidden"><a href="/" class="absolute top-4 left-4 text-gray-200 text-xl underline">← Back to home page</a> <h1 class="text-white text-3xl mb-4">Dare Roulette</h1> <div id="roulette-wheel" class="roulette-wheel svelte-vnofsz"></div> <div class="w-10 h-10 bg-green-700 svelte-vnofsz" id="pointer"></div> <button id="spin-button" class="my-4 bg-green-500 transition-colors hover:bg-green-700 text-white px-4 py-2 rounded z-10 relative block cursor-pointer disabled:opacity-50 disabled:cursor-wait">Spin the Wheel</button> <div id="selected-dare"><span class="text-red-300"> </span><br> </div> <div>Waiting for submissions...</div> <div class="absolute right-5 bottom-5 text-2xl"><div><label for="allow-repeats" class="text-gray-200">Allow Repeats?</label> <input class="w-10 h-5" type="checkbox" name="allow-repeats" id="allow-repeats"></div> <div class="mt-8"><button class="bg-none boder-gray-200 border-2 rounded-xl px-6 py-3 text-gray-200 underline hover:no-underline cursor-pointer">Reset Wheel</button></div></div></div>');function at(t,e){Le(e,!0);const n=500;let r,s=null;async function l(){r=new window.AudioContext;try{const b=await(await fetch(tt)).arrayBuffer();s=await r.decodeAudioData(b),console.log("Click sound loaded successfully")}catch(c){console.error("Error loading sound:",c)}}function f(){if(!r||!s){console.warn("Audio not initialized or sound not loaded yet");return}const c=r.createBufferSource();c.buffer=s,c.connect(r.destination),c.start(0)}function h(c){const b=(1-c)**.3333333333333333;return(1-b)*(1-1.34*b+.91*b**2)}function _(c,b,S,T=!0){const z=T?S-1:S,W=(b-c)/z;return Array.from({length:S},(C,$)=>c+W*$)}let i=H(Oe([])),a=null,g=H(!1),o=H(!1),d=H(void 0),v=0,k=H(""),E=H(void 0);function p(){if(u(g)||!a)return;A(g,!0);let c;for(;c=Math.floor(Math.random()*u(i).length),!(u(o)||!u(i).some((m,_e)=>m.played&&_e===c)););A(d,c,!0);const b=parseFloat(a.style.transform.replace(/[^0-9.-]/g,""))||0,S=Math.floor(Math.abs(b)/360),T=u(d)/u(i).length*360,z=Math.floor((Math.random()*2-1)*(180/u(i).length)),W=(S+4)*360+T;a.style.transform=`rotate(-${W+z}deg)`;const C=360/u(i).length,$=Math.abs(b-C/2)%C/C,ge=Math.abs(W+z-C/2)%C/C,q=Math.floor((W-v)*(u(i).length/360));_((1-$)/q,1-ge/q,q).map(m=>n*h(m)).forEach(m=>setTimeout(f,m)),v=W,L("/pick_user").then(m=>m.text()).then(m=>A(E,m,!0)),setTimeout(()=>{u(d)!==void 0&&A(k,u(i)[u(d)].content,!0),A(g,!1),u(d)!==void 0&&L("/set_played",{method:"post",body:JSON.stringify({content:u(i)[u(d)].content,by:u(i)[u(d)].by})})},n)}let x;ce(()=>{x=setInterval(()=>{L("/get_dares").then(c=>c.json()).then(c=>{A(i,c,!0)})},1e3),l()}),et(()=>{clearInterval(x)});var F=lt(),w=M(R(F),4);Xe(w,21,()=>u(i),Ve,(c,b,S)=>{var T=rt();re(T,`--i: ${S??""};`);var z=R(T);Z(()=>V(z,u(b).content)),j(c,T)}),je(w,c=>a=c,()=>a);var y=M(w,4);y.__click=p;var B=M(y,2);let N;var D=R(B),O=R(D),P=M(D,2),X=M(B,2);let G;var de=M(X,2),K=R(de),ve=M(R(K),2),he=M(K,2),pe=R(he);pe.__click=[nt,d],Z((c,b)=>{re(w,`--n: ${u(i).length??""};`),y.disabled=u(g)||u(i).length<2,N=ne(B,1,"text-white px-1 py-2 absolute w-full text-center shadow-[0_0_20px_20px_rgba(0,0,0,0.8)] bg-[rgba(0,0,0,0.8)] text-3xl font-bold drop-shadow-2xl",null,N,c),V(O,u(E)),V(P,` ${u(k)??""}`),G=ne(X,1,"absolute text-gray-400 text-7xl",null,G,b)},[()=>({hidden:u(g)||!u(k)}),()=>({hidden:u(i).length>=2})]),Pe(ve,()=>u(o),c=>A(o,c)),j(t,F),$e()}Fe(["click"]);qe(at,{target:document.getElementById("app")});
