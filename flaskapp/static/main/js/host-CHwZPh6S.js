import{k as Ne,l as Re,g as s,n as Be,r as _e,o as he,q as De,I as re,u as ge,v as ae,w as Pe,x as Le,y as le,E as qe,z as He,A as We,B as ze,C as Oe,D as Ue,F as $e,G as Fe,H as Je,J as ce,K as ue,L as Ve,M as Xe,N as Ye,O as Ge,P as Ke,Q as Qe,R as se,S as Ze,T as je,U as be,V as et,d as ye,p as xe,a as I,W as me,t as L,X as tt,s as A,Y as J,b as D,e as we,j as O,c as m,f as M,Z as Y,h as rt,i as nt,_ as at,m as it}from"./svelte-FNCt5HIX.js";/* empty css                 */import{i as ne}from"./if-7-UY-z8t.js";/* empty css                      */function Ee(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let st=!1;function ke(t,e){return e}function ot(t,e,r,n){for(var a=[],i=e.length,u=0;u<i;u++)He(e[u].e,a,!0);var h=i>0&&a.length===0&&r!==null;if(h){var b=r.parentNode;We(b),b.append(r),n.clear(),P(t,e[0].prev,e[i-1].next)}ze(a,()=>{for(var l=0;l<i;l++){var o=e[l];h||(n.delete(o.k),P(t,o.prev,o.next)),Oe(o.e,!h)}})}function Me(t,e,r,n,a,i=null){var u=t,h={flags:e,items:new Map,first:null};{var b=t;u=b.appendChild(Ne())}var l=null,o=!1,y=Be(()=>{var c=r();return Je(c)?c:c==null?[]:ge(c)});Re(()=>{var c=s(y),f=c.length;o&&f===0||(o=f===0,lt(c,h,u,a,e,n,r),i!==null&&(f===0?l?_e(l):l=he(()=>i(u)):l!==null&&De(l,()=>{l=null})),s(y))})}function lt(t,e,r,n,a,i,u){var h=t.length,b=e.items,l=e.first,o=l,y,c=null,f=[],_=[],d,g,p,w;for(w=0;w<h;w+=1){if(d=t[w],g=i(d,w),p=b.get(g),p===void 0){var q=o?o.e.nodes_start:r;c=ut(q,e,c,c===null?e.first:c.next,d,g,w,n,a,u),b.set(g,c),f=[],_=[],o=c.next;continue}if(ct(p,d,w),p.e.f&re&&_e(p.e),p!==o){if(y!==void 0&&y.has(p)){if(f.length<_.length){var S=_[0],x;c=S.prev;var T=f[0],C=f[f.length-1];for(x=0;x<f.length;x+=1)fe(f[x],S,r);for(x=0;x<_.length;x+=1)y.delete(_[x]);P(e,T.prev,C.next),P(e,c,T),P(e,C,S),o=S,c=C,w-=1,f=[],_=[]}else y.delete(p),fe(p,o,r),P(e,p.prev,p.next),P(e,p,c===null?e.first:c.next),P(e,c,p),c=p;continue}for(f=[],_=[];o!==null&&o.k!==g;)o.e.f&re||(y??(y=new Set)).add(o),_.push(o),o=o.next;if(o===null)continue;p=o}f.push(p),c=p,o=p.next}if(o!==null||y!==void 0){for(var B=y===void 0?[]:ge(y);o!==null;)o.e.f&re||B.push(o),o=o.next;var E=B.length;if(E>0){var N=h===0?r:null;ot(e,B,N,b)}}ae.first=e.first&&e.first.e,ae.last=c&&c.e}function ct(t,e,r,n){Pe(t.v,e),t.i=r}function ut(t,e,r,n,a,i,u,h,b,l){var o=(b&$e)!==0,y=(b&Fe)===0,c=o?y?Le(a):le(a):a,f=b&qe?le(u):u,_={i:f,v:c,k:i,a:null,e:null,prev:r,next:n};try{return _.e=he(()=>h(t,c,f,l),st),_.e.prev=r&&r.e,_.e.next=n&&n.e,r===null?e.first=_:(r.next=_,r.e.next=_.e),n!==null&&(n.prev=_,n.e.prev=_.e),_}finally{}}function fe(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,a=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==n;){var u=Ue(i);a.before(i),i=u}}function P(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const de=[...` 	
\r\f \v\uFEFF`];function ft(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var i=a.length,u=0;(u=n.indexOf(a,u))>=0;){var h=u+i;(u===0||de.includes(n[u-1]))&&(h===n.length||de.includes(n[h]))?n=(u===0?"":n.substring(0,u))+n.substring(h+1):u=h}}return n===""?null:n}function dt(t,e){return t==null?null:String(t)}function Q(t,e,r,n,a,i){var u=t.__className;if(u!==r||u===void 0){var h=ft(r,n,i);h==null?t.removeAttribute("class"):t.className=h,t.__className=r}else if(i&&a!==i)for(var b in i){var l=!!i[b];(a==null||l!==!!a[b])&&t.classList.toggle(b,l)}return i}function ve(t,e,r,n){var a=t.__style;if(a!==e){var i=dt(e);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}return n}const vt=Symbol("is custom element"),pt=Symbol("is html");function _t(t,e,r,n){var a=ht(t);a[e]!==(a[e]=r)&&(r==null?t.removeAttribute(e):typeof r!="string"&&Ae(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function K(t,e,r){var n=Ve,a=ae;ce(null),ue(null);try{e!=="style"&&(ie.has(t.nodeName)||!customElements||customElements.get(t.tagName.toLowerCase())?Ae(t).includes(e):r&&typeof r=="object")?t[e]=r:_t(t,e,r==null?r:String(r))}finally{ce(n),ue(a)}}function ht(t){return t.__attributes??(t.__attributes={[vt]:t.nodeName.includes("-"),[pt]:t.namespaceURI===Ye})}var ie=new Map;function Ae(t){var e=ie.get(t.nodeName);if(e)return e;ie.set(t.nodeName,e=[]);for(var r,n=t,a=Element.prototype;a!==n;){r=Ge(n);for(var i in r)r[i].set&&e.push(i);n=Xe(n)}return e}function pe(t,e){return t===e||(t==null?void 0:t[je])===e}function gt(t={},e,r,n){return Ke(()=>{var a,i;return Qe(()=>{a=i,i=[],se(()=>{t!==r(...i)&&(e(t,...i),a&&pe(r(...a),t)&&e(null,...a))})}),()=>{Ze(()=>{i&&pe(r(...i),t)&&e(null,...i)})}}),t}function oe(t){be===null&&Ee(),et(()=>{const e=se(t);if(typeof e=="function")return e})}function bt(t){be===null&&Ee(),oe(()=>()=>se(t))}const yt="/static/main/aud/click-Hf2CT4va.wav";var xt=(t,e)=>A(e,!s(e)),mt=L("<ion-icon></ion-icon>",2),wt=L("<ion-icon></ion-icon>",2),Et=(t,e,r)=>e(s(r)),kt=L('<div class="flex text-gray-200 text-2xl w-[calc(100%_-_48px)] items-center mx-6 py-2 border-b-2 border-b-gray-600 last-of-type:border-b-0"><div class="grow text-center"> </div> <div><button aria-label="Remove player" class="hover:text-gray-400 cursor-pointer"><ion-icon></ion-icon></button></div></div>',2),Mt=L('<div class="text-red-500 absolute left-6 -top-1"> </div>'),At=L('<div class="top-0 right-0 h-screen fixed w-1/2 bg-gray-800 z-20 border-4 shadow-2xl shadow-gray-800 border-l-gray-600 flex flex-col"><div class="grow overflow-y-auto mt-20"></div> <form class="p-6 flex items-center justify-center relative" method="post"><!> <input type="text"> <button type="submit" class="ml-4 h-full border-4 border-green-500 rounded-xl aspect-square text-5xl text-green-500 cursor-pointer hover:bg-green-500/30" aria-label="Add player"><ion-icon></ion-icon></button></form></div>',2),It=L('<button aria-label="Manage Players"><!></button> <!>',1);function St(t,e){xe(e,!0),console.log("hello world!");let r=I(!1),n=I(me(["bob","himbwafa","test1231"])),a=I(""),i=I(null);function u(d){d.preventDefault(),console.log("added plauer"),A(i,null),O("/add_user",{method:"post",body:s(a),headers:{"Content-Type":"text/plain"}}).then(async g=>{g.ok?(s(n).push(s(a)),A(a,"")):A(i,await g.text(),!0)})}function h(d){O("/remove_user",{method:"post",body:d,headers:{"Content-Type":"text/plain"}}).then(g=>{if(g.ok){const p=s(n).indexOf(d);p!==-1&&s(n).splice(p,1)}})}oe(()=>{O("/get_users").then(d=>d.json()).then(d=>A(n,d,!0))});var b=It(),l=tt(b);l.__click=[xt,r];var o=m(l);{var y=d=>{var g=mt();K(g,"name","people-outline"),D(d,g)},c=d=>{var g=wt();K(g,"name","close"),D(d,g)};ne(o,d=>{s(r)?d(c,!1):d(y)})}var f=M(l,2);{var _=d=>{var g=At(),p=m(g);Me(p,21,()=>s(n),ke,(E,N)=>{var U=kt(),V=m(U),G=m(V),Z=M(V,2),X=m(Z);X.__click=[Et,h,N];var j=m(X);K(j,"name","trash-outline"),J(()=>Y(G,s(N))),D(E,U)});var w=M(p,2),q=m(w);{var S=E=>{var N=Mt(),U=m(N);J(()=>Y(U,s(i))),D(E,N)};ne(q,E=>{s(i)!==null&&E(S)})}var x=M(q,2);let T;var C=M(x,2),B=m(C);K(B,"name","add"),J(E=>T=Q(x,1,"w-full border-4 border-green-500 rounded-xl text-3xl text-gray-200 outline-none px-6 py-3 focus:ring-8 ring-green-500/30 [&.error]:border-red-500 [&.error]:ring-red-500/30",null,T,E),[()=>({error:s(i)!==null})]),rt("submit",w,u),nt(x,()=>s(a),E=>A(a,E)),D(d,g)};ne(f,d=>{s(r)&&d(_)})}J(()=>Q(l,1,`${(s(r)?"fixed":"absolute")??""} text-6xl text-gray-200 top-4 right-4 cursor-pointer hover:text-gray-400 z-30`)),D(t,b),we()}ye(["click"]);function Tt(t,e){O("/set_used",{method:"post"}).then(()=>{A(e,void 0)})}var Ct=L('<div class="roulette-segment svelte-c6q6t2"> </div>'),Nt=L('<div class="relative flex flex-col items-center justify-center min-h-screen bg-gray-800 overflow-hidden"><a href="/" class="absolute top-4 left-4 text-gray-200 text-xl underline">← Back to home page</a> <!> <h1 class="text-white text-3xl mb-4">Dare Roulette</h1> <div id="roulette-wheel" class="roulette-wheel svelte-c6q6t2"></div> <div class="w-10 h-10 bg-green-700 svelte-c6q6t2" id="pointer"></div> <button id="spin-button" class="my-4 bg-green-500 transition-colors hover:bg-green-700 text-white px-4 py-2 rounded z-10 relative block cursor-pointer disabled:opacity-50 disabled:cursor-wait">Spin the Wheel</button> <div id="selected-dare"><span class="text-red-300"> </span><br> </div> <div>Waiting for submissions...</div> <div class="absolute right-5 bottom-5 text-2xl"><div><label for="allow-repeats" class="text-gray-200">Allow Repeats?</label> <input class="w-10 h-5" type="checkbox" name="allow-repeats" id="allow-repeats"></div> <div class="mt-8"><button class="bg-none boder-gray-200 border-2 rounded-xl px-6 py-3 text-gray-200 underline hover:no-underline cursor-pointer">Reset Wheel</button></div></div></div>');function Rt(t,e){xe(e,!0);const r=15e3;let n,a=null;async function i(){n=new window.AudioContext;try{const k=await(await fetch(yt)).arrayBuffer();a=await n.decodeAudioData(k),console.log("Click sound loaded successfully")}catch(v){console.error("Error loading sound:",v)}}function u(){if(!n||!a){console.warn("Audio not initialized or sound not loaded yet");return}const v=n.createBufferSource();v.buffer=a,v.connect(n.destination),v.start(0)}function h(v){const k=(1-v)**.3333333333333333;return(1-k)*(1-1.34*k+.91*k**2)}function b(v,k,H,W=!0){const $=W?H-1:H,F=(k-v)/$;return Array.from({length:H},(z,ee)=>v+F*ee)}let l=I(me([])),o=null,y=I(!1),c=I(!1),f=I(void 0),_=0,d=I(""),g=I(void 0);function p(){if(s(y)||!o)return;A(y,!0);let v;for(;v=Math.floor(Math.random()*s(l).length),!(s(c)||!s(l).some((R,Ce)=>R.played&&Ce===v)););A(f,v,!0);const k=parseFloat(o.style.transform.replace(/[^0-9.-]/g,""))||0,H=Math.floor(Math.abs(k)/360),W=s(f)/s(l).length*360,$=Math.floor((Math.random()*2-1)*(180/s(l).length)),F=(H+4)*360+W;o.style.transform=`rotate(-${F+$}deg)`;const z=360/s(l).length,ee=Math.abs(k-z/2)%z/z,Te=Math.abs(F+$-z/2)%z/z,te=Math.floor((F-_)*(s(l).length/360));b((1-ee)/te,1-Te/te,te).map(R=>r*h(R)).forEach(R=>setTimeout(u,R)),_=F,O("/pick_user").then(R=>R.text()).then(R=>A(g,R,!0)),setTimeout(()=>{s(f)!==void 0&&A(d,s(l)[s(f)].content,!0),A(y,!1),s(f)!==void 0&&O("/set_played",{method:"post",body:JSON.stringify({content:s(l)[s(f)].content,by:s(l)[s(f)].by})})},r)}let w;oe(()=>{w=setInterval(()=>{O("/get_dares").then(v=>v.json()).then(v=>{A(l,v,!0)})},1e3),i()}),bt(()=>{clearInterval(w)});var q=Nt(),S=M(m(q),2);St(S,{});var x=M(S,4);Me(x,21,()=>s(l),ke,(v,k,H)=>{var W=Ct();ve(W,`--i: ${H??""};`);var $=m(W);J(()=>Y($,s(k).content)),D(v,W)}),gt(x,v=>o=v,()=>o);var T=M(x,4);T.__click=p;var C=M(T,2);let B;var E=m(C),N=m(E),U=M(E,2),V=M(C,2);let G;var Z=M(V,2),X=m(Z),j=M(m(X),2),Ie=M(X,2),Se=m(Ie);Se.__click=[Tt,f],J((v,k)=>{ve(x,`--n: ${s(l).length??""};`),T.disabled=s(y)||s(l).length<2,B=Q(C,1,"text-white px-1 py-2 absolute w-full text-center shadow-[0_0_20px_20px_rgba(0,0,0,0.8)] bg-[rgba(0,0,0,0.8)] text-3xl font-bold drop-shadow-2xl",null,B,v),Y(N,s(g)),Y(U,` ${s(d)??""}`),G=Q(V,1,"absolute text-gray-400 text-7xl",null,G,k)},[()=>({hidden:s(y)||!s(d)||s(l).length<2}),()=>({hidden:s(l).length>=2})]),at(j,()=>s(c),v=>A(c,v)),D(t,q),we()}ye(["click"]);it(Rt,{target:document.getElementById("app")});
